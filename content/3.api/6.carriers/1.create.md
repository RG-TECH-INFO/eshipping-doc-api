---
title: Criar Transportadora
description: 'Cria uma nova transportadora no sistema'
icon: lucide:plus-circle
---

## Endpoint

```http
POST /api/v1/carrier/create
```

## Headers

```http
Authorization: Bearer {seu_token_jwt}
Content-Type: application/json
```

## Parâmetros do Body

| Campo | Tipo | Obrigatório | Descrição |
|-------|------|-------------|-----------|
| `nameCarrier` | string | ✅ | Nome da transportadora (ex: "Correios", "DHL", "FedEx") |
| `typeCarrier` | enum | ✅ | Tipo da transportadora: `"TABELA"` ou `"API"` |
| `status` | enum | ✅ | Status da transportadora: `"HABILITADO"`, `"DESABILITADO"` ou `"PENDENTE"` |
| `fileName` | string | ❌ | Nome do arquivo de configuração (opcional) |
| `customTable` | object | ❌ | Configurações personalizadas da tabela de preços |
| `carrierPj` | object | ❌ | Dados da pessoa jurídica da transportadora |


## Exemplo de Resposta

```json
{
  "id": "carrier_1234567890abcdef"
}
```

## Códigos de Status HTTP

| Código | Descrição |
|--------|-----------|
| `201` | Transportadora criada com sucesso |
| `400` | Dados inválidos ou campos obrigatórios ausentes |
| `401` | Token de autenticação inválido ou ausente |
| `409` | Transportadora já existe com este nome |
| `500` | Erro interno do servidor |

## Detalhamento dos Campos

::collapsible
#title
`nameCarrier` (Obrigatório)

#content
Nome identificador da transportadora. Deve ser único dentro do tenant.

**Exemplos:**
- "Correios"
- "DHL Express"
- "FedEx"
- "Transportadora Local SP"
::

::collapsible
#title
`typeCarrier` (Obrigatório)

#content
Define como a transportadora será integrada ao sistema:

- **`"TABELA"`**: Transportadora que usa tabela de preços fixa
- **`"API"`**: Transportadora integrada via API externa
::

::collapsible
#title
`status` (Obrigatório)

#content
Controla a disponibilidade da transportadora no sistema:

- **`"HABILITADO"`**: Transportadora ativa e disponível para uso
- **`"DESABILITADO"`**: Transportadora inativa, não pode ser usada
- **`"PENDENTE"`**: Transportadora em processo de configuração
::

::collapsible
#title
`fileName` (Opcional)

#content
Nome do arquivo de configuração para transportadoras do tipo `"API"`. Este arquivo deve conter as configurações específicas da API da transportadora.

**Exemplo:**
```json
"fileName": "correios-api-config.json"
```
::

::collapsible
#title
`customTable` (Opcional)

#content
Configurações específicas para transportadoras do tipo `"TABELA"`:

```json
{
  "weightRanges": [
    {"min": 0, "max": 1, "price": 15.50},
    {"min": 1, "max": 5, "price": 25.00},
    {"min": 5, "max": 10, "price": 35.00}
  ],
  "deliveryTime": "3-5 dias úteis",
  "coverage": ["SP", "RJ", "MG", "PR"],
  "maxWeight": 30.0,
  "maxDimensions": {
    "length": 100,
    "width": 100,
    "height": 100
  }
}
```

**Campos da customTable:**
- `weightRanges`: Faixas de peso com preços correspondentes
- `deliveryTime`: Tempo estimado de entrega
- `coverage`: Estados/regiões atendidas
- `maxWeight`: Peso máximo aceito (em kg)
- `maxDimensions`: Dimensões máximas aceitas (em cm)
::

::collapsible
#title
`carrierPj` (Opcional)

#content
Dados da pessoa jurídica da transportadora:

```json
{
  "cnpj": "12.345.678/0001-90",
  "razaoSocial": "Empresa Brasileira de Correios e Telégrafos",
  "inscricaoEstadual": "123456789",
  "endereco": {
    "logradouro": "Rua das Flores, 123",
    "bairro": "Centro",
    "cidade": "São Paulo",
    "estado": "SP",
    "cep": "01234-567"
  },
  "contato": {
    "telefone": "(11) 1234-5678",
    "email": "contato@transportadora.com.br"
  }
}
```
::

## Exemplos de Aplicação

::tabs
  ::div{label="JavaScript" icon="vscode-icons:file-type-js-official"}
  ```javascript
  const axios = require('axios');

  async function createCarrier() {
    try {
      const response = await axios.post('https://api.eshipping.com/api/v1/carrier/create', {
        nameCarrier: 'Correios',
        typeCarrier: 'API',
        status: 'HABILITADO',
        fileName: 'correios-api-config.json',
        customTable: {
          weightRanges: [
            { min: 0, max: 1, price: 15.50 },
            { min: 1, max: 5, price: 25.00 }
          ],
          deliveryTime: '3-5 dias úteis'
        },
        carrierPj: {
          cnpj: '12.345.678/0001-90',
          razaoSocial: 'Empresa Brasileira de Correios e Telégrafos',
          inscricaoEstadual: '123456789'
        }
      }, {
        headers: {
          'Authorization': 'Bearer seu_token_aqui',
          'Content-Type': 'application/json'
        }
      });

      console.log('Transportadora criada:', response.data);
      return response.data;
    } catch (error) {
      console.error('Erro ao criar transportadora:', error.response?.data || error.message);
      throw error;
    }
  }

  // Uso
  createCarrier()
    .then(result => console.log('Sucesso:', result))
    .catch(error => console.error('Erro:', error));
  ```
  ::

  ::div{label="Python" icon="vscode-icons:file-type-python"}
  ```python
  import requests
  import json

  def create_carrier():
      url = "https://api.eshipping.com/api/v1/carrier/create"
      
      headers = {
          "Authorization": "Bearer seu_token_aqui",
          "Content-Type": "application/json"
      }
      
      data = {
          "nameCarrier": "FedEx",
          "typeCarrier": "API",
          "status": "HABILITADO",
          "fileName": "fedex-api-config.json",
          "customTable": {
              "weightRanges": [
                  {"min": 0, "max": 1, "price": 18.50},
                  {"min": 1, "max": 5, "price": 28.00}
              ],
              "deliveryTime": "2-3 dias úteis",
              "coverage": ["SP", "RJ", "MG", "PR"]
          },
          "carrierPj": {
              "cnpj": "98.765.432/0001-10",
              "razaoSocial": "FedEx Express Brasil Ltda",
              "inscricaoEstadual": "987654321"
          }
      }
      
      try:
          response = requests.post(url, headers=headers, json=data)
          response.raise_for_status()
          
          result = response.json()
          print(f"Transportadora criada com sucesso: {result}")
          return result
          
      except requests.exceptions.RequestException as e:
          print(f"Erro na requisição: {e}")
          if hasattr(e, 'response') and e.response is not None:
              print(f"Resposta do servidor: {e.response.text}")
          raise

  # Uso
  if __name__ == "__main__":
      create_carrier()
  ```
  ::

  ::div{label="Go" icon="vscode-icons:file-type-go"}
  ```go
  package main

  import (
      "bytes"
      "encoding/json"
      "fmt"
      "io"
      "net/http"
  )

  type WeightRange struct {
      Min   float64 `json:"min"`
      Max   float64 `json:"max"`
      Price float64 `json:"price"`
  }

  type CustomTable struct {
      WeightRanges []WeightRange `json:"weightRanges"`
      DeliveryTime string        `json:"deliveryTime"`
      Coverage     []string      `json:"coverage"`
  }

  type CarrierPj struct {
      CNPJ             string `json:"cnpj"`
      RazaoSocial      string `json:"razaoSocial"`
      InscricaoEstadual string `json:"inscricaoEstadual"`
  }

  type CarrierRequest struct {
      NameCarrier  string       `json:"nameCarrier"`
      TypeCarrier  string       `json:"typeCarrier"`
      Status       string       `json:"status"`
      FileName     *string      `json:"fileName,omitempty"`
      CustomTable  *CustomTable `json:"customTable,omitempty"`
      CarrierPj    *CarrierPj   `json:"carrierPj,omitempty"`
  }

  type CarrierResponse struct {
      ID string `json:"id"`
  }

  func createCarrier(token string) (*CarrierResponse, error) {
      url := "https://api.eshipping.com/api/v1/carrier/create"
      
      carrierData := CarrierRequest{
          NameCarrier: "UPS",
          TypeCarrier: "API",
          Status:      "HABILITADO",
          FileName:    stringPtr("ups-api-config.json"),
          CustomTable: &CustomTable{
              WeightRanges: []WeightRange{
                  {Min: 0, Max: 1, Price: 22.50},
                  {Min: 1, Max: 5, Price: 32.00},
              },
              DeliveryTime: "1-2 dias úteis",
              Coverage:     []string{"SP", "RJ", "MG"},
          },
          CarrierPj: &CarrierPj{
              CNPJ:             "11.222.333/0001-44",
              RazaoSocial:      "UPS Brasil Ltda",
              InscricaoEstadual: "112223334",
          },
      }

      jsonData, err := json.Marshal(carrierData)
      if err != nil {
          return nil, fmt.Errorf("erro ao serializar dados: %v", err)
      }

      req, err := http.NewRequest("POST", url, bytes.NewBuffer(jsonData))
      if err != nil {
          return nil, fmt.Errorf("erro ao criar requisição: %v", err)
      }

      req.Header.Set("Authorization", "Bearer "+token)
      req.Header.Set("Content-Type", "application/json")

      client := &http.Client{}
      resp, err := client.Do(req)
      if err != nil {
          return nil, fmt.Errorf("erro na requisição: %v", err)
      }
      defer resp.Body.Close()

      if resp.StatusCode != http.StatusCreated {
          body, _ := io.ReadAll(resp.Body)
          return nil, fmt.Errorf("erro do servidor (status %d): %s", resp.StatusCode, string(body))
      }

      var result CarrierResponse
      if err := json.NewDecoder(resp.Body).Decode(&result); err != nil {
          return nil, fmt.Errorf("erro ao decodificar resposta: %v", err)
      }

      return &result, nil
  }

  func stringPtr(s string) *string {
      return &s
  }

  func main() {
      token := "seu_token_aqui"
      
      result, err := createCarrier(token)
      if err != nil {
          fmt.Printf("Erro ao criar transportadora: %v\n", err)
          return
      }
      
      fmt.Printf("Transportadora criada com sucesso: %+v\n", result)
  }
  ```
  ::

  ::div{label="C#" icon="vscode-icons:file-type-csharp"}
  ```csharp
  using System;
  using System.Net.Http;
  using System.Text;
  using System.Text.Json;
  using System.Threading.Tasks;

  public class WeightRange
  {
      public double Min { get; set; }
      public double Max { get; set; }
      public double Price { get; set; }
  }

  public class CustomTable
  {
      public WeightRange[] WeightRanges { get; set; }
      public string DeliveryTime { get; set; }
      public string[] Coverage { get; set; }
  }

  public class CarrierPj
  {
      public string Cnpj { get; set; }
      public string RazaoSocial { get; set; }
      public string InscricaoEstadual { get; set; }
  }

  public class CarrierRequest
  {
      public string NameCarrier { get; set; }
      public string TypeCarrier { get; set; }
      public string Status { get; set; }
      public string FileName { get; set; }
      public CustomTable CustomTable { get; set; }
      public CarrierPj CarrierPj { get; set; }
  }

  public class CarrierResponse
  {
      public string Id { get; set; }
  }

  public class EShippingApiClient
  {
      private readonly HttpClient _httpClient;
      private readonly string _baseUrl;

      public EShippingApiClient(string baseUrl, string token)
      {
          _baseUrl = baseUrl;
          _httpClient = new HttpClient();
          _httpClient.DefaultRequestHeaders.Add("Authorization", $"Bearer {token}");
      }

      public async Task<CarrierResponse> CreateCarrierAsync(CarrierRequest carrierData)
      {
          var json = JsonSerializer.Serialize(carrierData, new JsonSerializerOptions
          {
              PropertyNamingPolicy = JsonNamingPolicy.CamelCase
          });

          var content = new StringContent(json, Encoding.UTF8, "application/json");
          var response = await _httpClient.PostAsync($"{_baseUrl}/api/v1/carrier/create", content);

          if (!response.IsSuccessStatusCode)
          {
              var errorContent = await response.Content.ReadAsStringAsync();
              throw new HttpRequestException($"Erro na API: {response.StatusCode} - {errorContent}");
          }

          var responseContent = await response.Content.ReadAsStringAsync();
          return JsonSerializer.Deserialize<CarrierResponse>(responseContent, new JsonSerializerOptions
          {
              PropertyNamingPolicy = JsonNamingPolicy.CamelCase
          });
      }
  }

  class Program
  {
      static async Task Main(string[] args)
      {
          var client = new EShippingApiClient("https://api.eshipping.com", "seu_token_aqui");

          var carrierData = new CarrierRequest
          {
              NameCarrier = "TNT Express",
              TypeCarrier = "API",
              Status = "HABILITADO",
              FileName = "tnt-api-config.json",
              CustomTable = new CustomTable
              {
                  WeightRanges = new[]
                  {
                      new WeightRange { Min = 0, Max = 1, Price = 20.00 },
                      new WeightRange { Min = 1, Max = 5, Price = 30.00 }
                  },
                  DeliveryTime = "2-4 dias úteis",
                  Coverage = new[] { "SP", "RJ", "MG", "PR", "RS" }
              },
              CarrierPj = new CarrierPj
              {
                  Cnpj = "33.444.555/0001-66",
                  RazaoSocial = "TNT Express Brasil Ltda",
                  InscricaoEstadual = "334445556"
              }
          };

          try
          {
              var result = await client.CreateCarrierAsync(carrierData);
              Console.WriteLine($"Transportadora criada com sucesso: {result.Id}");
          }
          catch (Exception ex)
          {
              Console.WriteLine($"Erro ao criar transportadora: {ex.Message}");
          }
      }
  }
  ```
  ::

  ::div{label="cURL" icon="lucide:terminal"}
  ```bash
  curl -X POST "https://api.eshipping.com/api/v1/carrier/create" \
    -H "Authorization: Bearer seu_token_aqui" \
    -H "Content-Type: application/json" \
    -d '{
      "nameCarrier": "Correios",
      "typeCarrier": "API",
      "status": "HABILITADO",
      "fileName": "correios-api-config.json",
      "customTable": {
        "weightRanges": [
          {"min": 0, "max": 1, "price": 15.50},
          {"min": 1, "max": 5, "price": 25.00}
        ],
        "deliveryTime": "3-5 dias úteis"
      },
      "carrierPj": {
        "cnpj": "12.345.678/0001-90",
        "razaoSocial": "Empresa Brasileira de Correios e Telégrafos",
        "inscricaoEstadual": "123456789"
      }
    }'
  ```
  ::
::
